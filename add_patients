#Regex Check
name_regex="[^a-zA-Z ]+"
department_regex="[^a-zA-Z ]+"
doc_name_regex="[^a-zA-Z ]+"
doc_id_regex="[^0-9]+"

echo "Please add the following patient details"
echo "Enter patient name"
read patient_name

if [[ "$patient_name" =~ $name_regex ]]
then
echo "Please enter a valid name"
exit 1
fi

echo "Enter department where patient is admitted"
read department

if [[ "$department" =~ $department_regex ]]
then
echo "Please enter a valid department"
exit 1
fi

echo "Enter doctor's name for patient"
read doctor_name

if [[ "$doctor_name" =~ $doc_name_regex ]]
then
echo "Please enter a valid name"
exit 1
fi 
#Might have to do ask doctor_id and get doctor name from doctor table based on id
#Might have to do ask doctor_id and get doctor name from doctor table based on id
echo "Enter doc id"
read doctor_id

if [[ "$doctor_id" =~ $doc_id_regex ]]
then
echo "Please enter a valid doc id"
exit 1
fi


#ADD RECORDS
filename=patients.csv
#Check if file ends with new line and add records appropriately
if [ ! -s "$filename" ]; then
  printf "%s%s%s%s%s\n" $RANDOM,$patient_name,"$department",$doctor_name,$doctor_id >> patients.csv
elif [ -z "$(tail -c 1 <"$filename")" ]; then
  printf "%s%s%s%s%s\n" $RANDOM,$patient_name,"$department",$doctor_name,$doctor_id >> patients.csv
else
  printf "\n%s%s%s%s%s\n" $RANDOM,$patient_name,"$department",$doctor_name,$doctor_id >> patients.csv
fi

echo " Patient's details added! "
